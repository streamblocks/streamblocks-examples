namespace sort:

 	import var system.io.print_s;
    import var system.io.print_i;
    
	actor Send() 
		==>
		int O_0, 
		int O_1,
		int O_2,
		int O_3,
		int O_4,
		int O_5,
		int O_6,
		int O_7
		:
		
		List(type:int, size=8) data = [7, 6, 5, 3, 4, 2, 1, 0];
		//List(type:int, size=8) data = [0, 1, 2, 3, 4, 5, 6, 7];
		do
			print_s("data: ");
			print_i(data[0]);
			print_s(", ");
			print_i(data[1]);
			print_s(", ");
			print_i(data[2]);
			print_s(", ");
			print_i(data[3]);
			print_s(", ");
			print_i(data[4]);
			print_s(", ");
			print_i(data[5]);
			print_s(", ");
			print_i(data[6]);
			print_s(", ");
			print_i(data[7]);
			print_s("\n");
			O_0 <-- data[0];
			O_1 <-- data[1];
			O_2 <-- data[2];
			O_3 <-- data[3];
			O_4 <-- data[4];
			O_5 <-- data[5];
			O_6 <-- data[6];
			O_7 <-- data[7];
		end
	end

	actor Print()
		int I_0, 
		int I_1,
		int I_2,
		int I_3,
		int I_4,
		int I_5,
		int I_6,
		int I_7
		==>
		:
		
		List(type:int, size=8) data;
		
		repeat
			I_0 --> data[0];
			I_1 --> data[1];
			I_2 --> data[2];
			I_3 --> data[3];
			I_4 --> data[4];
			I_5 --> data[5];
			I_6 --> data[6];
			I_7 --> data[7];
			
			print_s("sort: ");
			print_i(data[0]);
			print_s(", ");
			print_i(data[1]);
			print_s(", ");
			print_i(data[2]);
			print_s(", ");
			print_i(data[3]);
			print_s(", ");
			print_i(data[4]);
			print_s(", ");
			print_i(data[5]);
			print_s(", ");
			print_i(data[6]);
			print_s(", ");
			print_i(data[7]);
			print_s("\n");
			
		end
	end
	
	network Test_BitonicSort() ==> :
	entities
		send = Send();
		sort = BitonicSort8(DIRECTION=DESCENDING);
		print = Print();
	structure
		send.O_0 --> sort.I_0;
		send.O_1 --> sort.I_1;
		send.O_2 --> sort.I_2;
		send.O_3 --> sort.I_3;
		send.O_4 --> sort.I_4;
		send.O_5 --> sort.I_5;
		send.O_6 --> sort.I_6;
		send.O_7 --> sort.I_7;
		
		sort.O_0 --> print.I_0;
		sort.O_1 --> print.I_1;
		sort.O_2 --> print.I_2;
		sort.O_3 --> print.I_3;
		sort.O_4 --> print.I_4;
		sort.O_5 --> print.I_5;
		sort.O_6 --> print.I_6;
		sort.O_7 --> print.I_7;
	end

end